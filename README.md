# Лабораторная работа 4

## Цель работы
Завершение бэкенда для SPA

## Порядок показа
1. Выполнить метод аутентификации через swagger в режиме инкогнито
2. Получить список заявок в swagger
3. Из браузера использовать содержимое куки из вкладки Application или JWT из ответа аутентификации для заголовков cookie или authorization соответственно в остальных запросах через insomnia/postman
4. В insomnia/postman выполнить GET списка заявок: 401/403 для гостя, для создателя только его заявки
5. Выполнить PUT завершения заявки: для создателя 403 статус, для модератора успех и обновление полей
6. Выполнить GET списка заявок - для модератора все заявки
7. Показать содержимое Redis через cmd, для сессий показать пользователя

## Контрольные вопросы
- Куки
- Сессия
- Redis
- JWT
- Авторизация и аутентификация
- SSO
- Двухфакторная аутентификация
- RSA

## Sequence диаграмма
Весь набор HTTP запросов по бизнес-процессу без БД и нативного приложения:
- Аутентификация
- Список услуг
- GET пустой иконки корзины
- Добавление услуги в заявку
- GET иконки корзины
- Просмотр черновой заявки
- Редактирование заявки
- Формирование заявки
- Список заявок
- Завершение модератором из второго фронтенда
- Список заявок с расчетом

**Требования к диаграмме:**
- Добавить домены в качестве Lifeline
- При добавлении сообщений выбирать методы доменов из диаграммы классов
- Передавать ключевые входные и выходные данные через arguments в скобках у Message

## Задание
Добавление авторизации и swagger в веб-сервис, подготовка ТЗ

### Требования к реализации
1. Реализовать методы бэкенда для аутентификации и регистрации
2. Авторизация через хранение сессий и куки
3. Автозаполнение пользователя в таблице заявок при создании новой
4. Добавить описание методов для swagger
5. Добавить проверку Permissions для методов модератора

### Доступ к API
- **Без авторизации в Swagger:** доступно только чтение-получение данных через API
- **С авторизацией:** методы пользователя
- **Для модератора:** доступны все методы

## Структура РПЗ

### Основные разделы
- Титульный лист РПЗ
- 3 диаграммы оформить как рисунки в РПЗ
- Расчет аппаратных требований (число ядер, ОП, прирост БД) по количеству пользователей и rps
- Приложение 1. ТЗ как приложение к РПЗ
- Приложение 2. Таблица методы веб-сервиса

### Состав ТЗ на итоговую систему
(использовать сплошную нумерацию внутри пунктов)

#### 1. Цель
#### 2. Назначение
Краткое описание для чего, кто работает в системе

#### 3. Задачи
12 задач (8 лабораторных-задач по бекенду/фронтенду, нативное приложение, демо в Pages, документация, репозиторий Git) с указанием ваших технологий по каждой задаче

#### 4. Функциональные требования
Список HTTP методов, далее список окон и какие действия для каких групп пользователей доступны. Указать, какие методы бэкенда при этом вызываются. Всего 14 подпунктов - HTTP методы, меню и 12 страниц приложения:

**Гость:**
- Регистрация
- Аутентификация
- Главная
- Список услуг
- Одна услуга
- 403 и 404

**Создатель заявки:**
- Страница заявки
- Список заявок
- Личный кабинет

**Модератор:**
- Список услуг таблицей
- Редактирование/создание услуги

#### 5. Требования к аппаратному обеспечению
- Для сервера
- Для клиента

#### 6. Требования к программному обеспечению
- С версиями для серверных компонентов
- Для клиента