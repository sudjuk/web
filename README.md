## Лабораторная 2

### Цель работы
Разработка структуры базы данных и её подключение к бэкенду.

### Порядок показа
1. Показать панель администратора Django/Adminer: добавить новую услугу, проверить данные через SELECT в БД.
2. Показать 3 страницы приложения: выполнить поиск, удалить заявку, перейти по URL удалённой заявки, добавить две услуги в заявку (обновление карточки корзины), показать содержимое заявки.
3. В БД показать запросом результат логического удаления и новую заявку.
4. В БД изменить поля по теме в заявке и м-м и показать изменения в приложении.
5. В коде показать модели, составной уникальный ключ м-м, 4 контроллера через ORM; удаление заявки — через SQL UPDATE.

### Контрольные вопросы
Виды БД, SQL‑запросы, курсоры, ORM, модель и миграции, чистая архитектура.

### ER‑диаграмма
Сделать в StarUML: таблицы, связи, столбцы, типы столбцов и их длина, первичные и внешние ключи.

### Задание
Создание базы данных PostgreSQL по теме работы, подключение БД к созданным трём шаблонам.

Необходимо разработать структуру БД по выбранной теме и реализовать её с учётом требований ниже. Использовать таблицу услуг на страницах разработанного приложения. Наполнить таблицы БД данными через админку Django или Adminer.

### Функциональные требования (ORM и SQL)
- Получение и поиск услуг, добавление услуги в текущую заявку (статус «черновик», она же «корзина»), а также просмотр этой заявки — через ORM.
- На странице текущей заявки добавить кнопку логического удаления заявки (статус меняется на «удалён») с помощью выполнения SQL‑запроса UPDATE, без ORM.
- Всего 5 HTTP‑методов: три GET и один POST (добавление в заявку) через ORM, ещё один POST (логическое удаление заявки) через SQL.

### Правила поведения заявок
- При отсутствии у пользователя заявки в статусе «черновик» она создаётся только при добавлении услуги в заявку.
- Если такая заявка уже есть, услуга добавляется сразу в неё.
- Удалённые заявки просматривать нельзя.
- Если у пользователя нет текущей заявки, её карточка на странице услуг не активна.

### Требования к БД
Обязательно наличие 4 таблиц (каскадное удаление запрещено!):

1. Услуги:
   - наименование,
   - описание,
   - статус (удалён/действует),
   - URL к изображению (Nullable),
   - поля по предметной области.
2. Заявки:
   - только 4 поля NotNull: id, статус, дата создания (datetime), создатель;
   - дата формирования (2 действия создателя) (datetime),
   - дата завершения (2 действия модератора) (datetime) и модератор,
   - поля по предметной области.
3. Связь м‑м «заявки‑услуги»:
   - составной уникальный ключ,
   - дополнительные поля: количество/порядок/главный/другое.
4. Пользователи:
   - для Django обязательно использовать системную таблицу (НЕ свою): логин, пароль, признак модератора.

- Обязательно наличие 5 или более статусов заявок: «черновик», «удалён», «сформирован», «завершён», «отклонён».
- У каждого пользователя не более одной заявки в статусе «черновик».
- Названия таблиц и их полей должны соответствовать предметной области.
- Одно из дополнительных полей заявки или м‑м рассчитывается при завершении заявки.
